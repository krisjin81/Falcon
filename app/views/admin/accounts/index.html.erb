<div class="accordion">
  <div class="accordion-group">
    <div class="accordion-heading">
      <%= link_to t('admin.filters.title'), '#filter', :class => 'accordion-toggle', 'data-toggle' => 'collapse' %>
    </div>
    <div class="accordion-body collapse <%= params[:q].present? ? 'in' : '' %>" id="filter">
      <%= search_form_for @query, :url => collection_url, :builder => SimpleForm::FormBuilder, :wrapper => :light, :html => { :class => 'search-form' } do |f| %>
        <%= hidden_field_tag(:sort_name, params[:sort_name]) if params[:sort_name] %>
        <%= hidden_field_tag(:sort_dir, params[:sort_dir]) if params[:sort_dir] %>
        <%= hidden_field_tag(:per_page, params[:per_page]) if params[:per_page] %>
        <%= f.input :email_cont, :as => :string, :placeholder => t('admin.filters.email_contains') %>
        <%= f.input :profile_username_cont, :placeholder => t('admin.filters.username_contains') %>
        <%= f.input :profile_first_name_cont, :placeholder => t('admin.filters.first_name_contains') %>
        <%= f.input :profile_last_name_cont, :placeholder => t('admin.filters.last_name_contains') %>
        <%= f.input :profile_country_name_cont, :as => :string, :placeholder => t('admin.filters.country_contains') %>
        <%= f.input :confirmed_at_not_null, :as => :boolean, :label => false, :inline_label => t('admin.filters.confirmed') %>
        <div class="form-actions">
          <%= f.submit t('helpers.actions.search'), :class => 'btn btn-primary' %>
          <%= link_to t('helpers.actions.clear'), collection_url, :class => 'btn' %>
        </div>
      <% end %>
    </div>
  </div>
</div>

<div class="form-actions">
  <%= link_to t('.new', :default => t('helpers.actions.new')), new_resource_path, :class => 'btn btn-primary' %>
</div>

<% if collection.present? %>
  <table class="table table-striped">
    <thead>
      <tr>
        <th><%= sortable_header(Account.human_attribute_name(:id), :id) %></th>
        <th><%= sortable_header(Account.human_attribute_name(:email), :email) %></th>
        <th><%= sortable_header(Profile.human_attribute_name(:username), :profile_username) %></th>
        <th><%= sortable_header(Profile.human_attribute_name(:first_name), :profile_first_name) %></th>
        <th><%= sortable_header(Profile.human_attribute_name(:last_name), :profile_last_name) %></th>
        <th><%= sortable_header(Account.human_attribute_name(:created_at), :created_at) %></th>
        <th><%= sortable_header(Account.human_attribute_name(:confirmed), :confirmed_at) %></th>
        <th><%= sortable_header(Account.human_attribute_name(:last_sign_in_at), :last_sign_in_at) %></th>
        <th><%= sortable_header(Profile.human_attribute_name(:gender), :gender) %></th>
        <th><%= sortable_header(Profile.human_attribute_name(:country), :profile_country_name) %></th>
        <th><%=t '.actions', :default => t('helpers.actions.actions') %></th>
      </tr>
    </thead>
    <tbody>
      <% collection.each do |item| %>
        <tr>
          <td><%= link_to item.id, resource_path(item) %></td>
          <td><%= item.email %></td>
          <td><%= item.profile.username %></td>
          <td><%= item.profile.first_name %></td>
          <td><%= item.profile.last_name %></td>
          <td><%=l item.created_at %></td>
          <td><%= item.confirmed? %></td>
          <td><%= item.last_sign_in_at %></td>
          <td><%= item.profile.gender_humanize %></td>
          <td><%= item.profile.country.name %></td>
          <td>
            <%= link_to t('.edit', :default => t('helpers.actions.edit')), edit_resource_path(item), :class => 'btn btn-mini' %>
            <%= link_to t('.view', :default => t('helpers.actions.view')), resource_path(item), :class => 'btn btn-mini' %>
            <%= link_to t('.destroy', :default => t('helpers.actions.destroy')), resource_path(item), :method => :delete, :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')), :class => 'btn btn-mini btn-danger' %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% else %>
 <p><%= t('helpers.empty_list') %></p>
<% end %>

<%= render 'admin/page_size' %>
<%= will_paginate(collection) %>
